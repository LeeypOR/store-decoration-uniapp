{"version":3,"sources":["uni-app:///main.js","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pagesA/order/waitPayment.vue?d42e","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pagesA/order/waitPayment.vue?f071","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pagesA/order/waitPayment.vue?802c","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pagesA/order/waitPayment.vue?39eb","uni-app:///pagesA/order/waitPayment.vue","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pagesA/order/waitPayment.vue?16b4","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pagesA/order/waitPayment.vue?1b4f","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pagesA/order/waitPayment.vue?8c83"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","shopCard","orderInfo","props","onLoad","onShow","onBackPress","onHide","clearTimeout","onUnload","data","title","orderId","orderDetail","loading","groupData","cardData","countTime","isPayment","payWaitTime","timer","modelShow","orderType","shopId","computed","getName","addresData","methods","interceptBack","uni","goMyOrder","getOrderDetail","res","length","console","payBtn","goPay","orderPayType","payDispose","timeStamp","nonceStr","package","signType","paySign","success","goodsName","goodsId","type","extendField","fail","getPayment","index","timeOutPayWait","state"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,oBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoI;AACpI;AAC+D;AACL;AACa;AACyB;;;AAGhG;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,kGAAM;AACR,EAAE,2GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sLAEN;AACP,KAAK;AACL;AACA,aAAa,oLAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5EA;AAAA;AAAA;AAAA;AAAy0B,CAAgB,yyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC4F71B;EACAC;IACAC;IACAC;EACA;EACAC,QAEA;EACAC;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;MACA;IACA;EACA;EACAC;IACA;MACA;MACA;IACA;EACA;EACAC;IACAC;IACA;EACA;EACA;EACAC;IACAD;IACA;EACA;EACAE;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACAC;MACAA;MAEA;IACA;EAEA;EACAC;IACA;IACAC;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACAC;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGA;kBAAAnB;gBAAA;cAAA;gBAAAoB;gBACA;gBACA;kBACA;gBACA;gBACAC;gBACA;kBACA;oBACAA;kBACA;gBACA;gBACAC;gBACA;kBACA;kBACAA;gBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IACAC;MAAA;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAC;gBAAA;gBAAA,OACA;kBACAzB;kBACAyB;gBACA;cAAA;gBAAA;gBAHAL;gBAIA;gBAAA,kCACAA;cAAA;gBAAA;gBAAA;gBAEAE;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAI;MAAA;MACA;MACA;MACA;QACA;QACA;QACA;MACA;MACA;MACA3C;QACA4C;QACAC;QACAC;QACAC;QACAC;QACAC;UAAA;UACA,wDACA;YACAjC;YACAkC;YACAC;YACAlC;YACAmC;YACAC;UAAA,GACA;UACA;UACA;QACA;QACAC;UAAA;UACA;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QAAAC;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACAL;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA;gBAAA,OAEA;kBAAAnC;gBAAA;cAAA;gBAAA;gBAAA;gBAAAoB;gBACAqB;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA;kBACA;gBACA;kBACA;gBACA;gBAAA;cAAA;gBAIAF;gBAAA,MACAE;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAAA,MAGAF;kBAAA;kBAAA;gBAAA;gBACA;kBACA,uCACA;gBACA;kBACA;gBACA;gBAAA;cAAA;gBAGA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxSA;AAAA;AAAA;AAAA;AAAsrC,CAAgB,smCAAG,EAAC,C;;;;;;;;;;;ACA1sC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAgkD,CAAgB,g8CAAG,EAAC,C","file":"pagesA/order/waitPayment.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagesA/order/waitPayment.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./waitPayment.vue?vue&type=template&id=8e8e78e8&scoped=true&\"\nvar renderjs\nimport script from \"./waitPayment.vue?vue&type=script&lang=js&\"\nexport * from \"./waitPayment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./waitPayment.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./waitPayment.vue?vue&type=style&index=1&id=8e8e78e8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8e8e78e8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesA/order/waitPayment.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./waitPayment.vue?vue&type=template&id=8e8e78e8&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-navbar/u-navbar\" */ \"uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-modal/u-modal\" */ \"uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 =\n    _vm.orderDetail && !_vm.isPayment\n      ? _vm.switchMoney(_vm.orderDetail.orderActualPrice || 0)\n      : null\n  var m1 =\n    _vm.orderDetail &&\n    !_vm.isPayment &&\n    _vm.orderDetail.couponAmount &&\n    _vm.orderDetail.discountPrice &&\n    (_vm.orderDetail.couponAmount != \"0\" ||\n      _vm.orderDetail.discountPrice != \"0\")\n      ? _vm.switchMoney(\n          _vm.orderDetail.couponAmount || _vm.orderDetail.discountPrice\n        )\n      : null\n  var m2 =\n    _vm.orderDetail &&\n    !_vm.isPayment &&\n    _vm.orderDetail.goodsOrderEndTime &&\n    _vm.countTime\n      ? _vm.timeObj[\"payTime\"] ||\n        _vm.downTime(_vm.countTime, \"payTime\", \"time\", _vm.goMyOrder)\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      return _vm.$u.throttle(_vm.payBtn, 3000)\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./waitPayment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./waitPayment.vue?vue&type=script&lang=js&\"","<template>\r\n    <view v-if=\"orderDetail\">\r\n        <view class=\"u-skeleton\">\r\n        <u-navbar z-index=\"999999\" :border-bottom=\"false\" title=\"等待付款\" title-blod title-size=\"36\" :custom-back=\"interceptBack\" />\r\n          <view v-if=\"!isPayment\">\r\n            <view class=\"head-price\">\r\n              <text class=\"price-symbol\">¥</text>\r\n              <text class=\"price\">{{switchMoney(orderDetail.orderActualPrice || 0)}}</text>\r\n            </view>\r\n            <view v-if=\" orderDetail.couponAmount &&orderDetail.discountPrice && (orderDetail.couponAmount!='0'|| orderDetail.discountPrice!='0') \" class=\"favorable-price\">\r\n              已优惠：¥{{switchMoney(orderDetail.couponAmount || orderDetail.discountPrice)}}\r\n            </view>\r\n            <view v-if=\"orderDetail.goodsOrderEndTime && countTime\" class=\"time-count u-flex\">\r\n                <text class=\"remaining-time\">剩余支付时间：{{timeObj['payTime'] || downTime(countTime,'payTime','time',goMyOrder)}}</text>\r\n            </view>\r\n            <view :class=\"['address',{'u-flex':!orderDetail.addressConfig}]\">\r\n                <view v-if=\"orderDetail && orderDetail.addressConfig\" class=\"u-flex content\">\r\n                  <image class=\"user-image u-skeleton-circle\" src=\"../static/image/app_icon_tihuoren.png\"></image>\r\n                  <view class=\"user-info\">\r\n                    <text class=\"delivery-person\">提货人</text>\r\n                    <text class=\"user-name\">{{orderDetail.userName?orderDetail.userName:''}} {{orderDetail.userPhone?orderDetail.userPhone:''}}</text>\r\n                  </view>\r\n                </view>\r\n                <view :class=\"['u-flex', {'u-p-b-30':orderDetail.addressConfig}]\">\r\n                  <image class=\"address-image u-skeleton-circle\" src=\"../static/image/icon_address.png\"></image>\r\n                  <view class=\"card-left\">\r\n                      <view class=\"left-top \">\r\n                          <text class=\"left-user-name u-skeleton-fillet\">{{getName.name}}</text>\r\n                          <text class=\"left-user-phone u-skeleton-fillet\">{{getName.phone}}</text>\r\n                      </view>\r\n\r\n                      <view class=\"left-bottom u-skeleton-fillet\">\r\n                          {{orderDetail.detailAddress?orderDetail.detailAddress:''}}\r\n                      </view>\r\n                  </view>\r\n                </view>\r\n\r\n            </view>\r\n            <!-- v-if=\"orderDetail.orderGoodsList.length\" -->\r\n            <view class=\"store-card\">\r\n                <!-- <view class=\"title u-flex u-skeleton-fillet\">\r\n                    订单商品\r\n                </view> -->\r\n                <shop-card :sort=\"true\" :titleShow=\"false\" :borderRaidus=\"true\" :shopList=\"orderDetail.orderGoodsList\"></shop-card>\r\n            </view>\r\n            <view class=\"order-info\">\r\n                <order-info :detail=\"orderDetail\"></order-info>\r\n            </view>\r\n          </view>\r\n\r\n          <view class=\"pay-wait u-flex\" v-else>\r\n              <image src=\"/pagesA/static/image/pay-wait.gif\"></image>\r\n              <view class=\"title\">支付中…</view>\r\n<!--              <view class=\"tip\">可稍后在订单列表页查看结果</view>-->\r\n          </view>\r\n\r\n\r\n          <!-- <view class=\"u-flex address \">\r\n              <image class=\"u-skeleton-circle\" src=\"../static/image/icon_address.png\"></image>\r\n              <view class=\"card-left\">\r\n                  <view class=\"left-top \">\r\n                      <text class=\"left-user-name u-skeleton-fillet\">{{orderDetail.userName?orderDetail.userName:''}}</text>\r\n                      <text class=\"left-user-phone u-skeleton-fillet\">{{orderDetail.userPhone?orderDetail.userPhone:''}}</text>\r\n                  </view>\r\n\r\n                  <view class=\"left-bottom u-skeleton-fillet\">\r\n                      {{orderDetail.detailAddress?orderDetail.detailAddress:''}}\r\n                  </view>\r\n              </view>\r\n          </view> -->\r\n          <!-- v-if=\"orderDetail.orderGoodsList.length\" -->\r\n        </view>\r\n        <view class=\"seat\"></view>\r\n        <view class=\"pay-btn\" v-if=\"!isPayment\">\r\n            <view @click=\"$u.throttle(payBtn, 3000)\" class=\"btn \">\r\n                去支付\r\n            </view>\r\n        </view>\r\n        <u-modal\r\n          v-model=\"modelShow\"\r\n          content=\"亲 ！支付结果还没查询到，在等等吧！\"\r\n          title=\"提示\"\r\n          confirm-color=\"#FFFFFF\"\r\n         >\r\n        </u-modal>\r\n        <!-- <u-skeleton :loading=\"loading\" :animation=\"true\" bgColor=\"#F5F5F5\"></u-skeleton> -->\r\n    </view>\r\n</template>\r\n\r\n<script>\r\nimport shopCard from \"@/components/shopCard.vue\";\r\nimport orderInfo from \"../components/orderInfo.vue\";\r\nexport default {\r\n    components: {\r\n        shopCard,\r\n        orderInfo\r\n    },\r\n    props: {\r\n\r\n    },\r\n    onLoad(options) {\r\n        this.cardData = options.cardData ? JSON.parse(options.cardData) : {}\r\n        this.groupData = options.groupData ? JSON.parse(options.groupData) : {}\r\n        this.orderId = options.orderId?options.orderId:''\r\n        this.isCart = parseInt(options?.isCart) || false\r\n    },\r\n    onShow(){\r\n        if(this.orderId){\r\n            this.getOrderDetail()\r\n        }\r\n    },\r\n    onBackPress(){\r\n        if(this.isPayment){\r\n            this.interceptBack()\r\n            return  true\r\n        }\r\n    },\r\n    onHide() {\r\n        clearTimeout(this.timer)\r\n        this.modelShow = false\r\n    },\r\n    // 页面销毁\r\n    onUnload() {\r\n        clearTimeout(this.timer)\r\n        this.modelShow = false\r\n    },\r\n    data() {\r\n        return {\r\n            title: \"等待付款\",\r\n            orderId: '',\r\n            orderDetail: null,\r\n            loading: true,\r\n            groupData: {},//平团数据\r\n            cardData: {},//会员卡权益卡订单\r\n            countTime: 0,\r\n            isPayment: false,    // 支付中\r\n            payWaitTime:2000 ,    // 每次查询间隔\r\n            timer:null,\r\n            modelShow:false,\r\n            orderType:'',\r\n            shopId:''\r\n        }\r\n    },\r\n    computed:{\r\n        getName(){\r\n            let addresData = {}\r\n            addresData.name=this.orderDetail?.addressConfig?.contactName ||this.orderDetail?.userName\r\n            addresData.phone=this.orderDetail?.addressConfig?.phone ||this.orderDetail?.userPhone\r\n\r\n            return addresData\r\n        },\r\n\r\n    },\r\n    methods: {\r\n        // 拦截返回\r\n        interceptBack(){\r\n            if(this.isPayment){\r\n                this.modelShow =true\r\n                // uni.showModal({\r\n                //   title: '提示',\r\n                //   content:'亲 ！支付结果还没查询到，在等等吧！',\r\n                //   showCancel:false,\r\n                // })\r\n                return\r\n            }\r\n            uni.navigateBack();\r\n        },\r\n        // 倒计时取消 页面跳转\r\n        goMyOrder(){\r\n            this.goTo('/pagesA/mine/myOrder',false,true)\r\n        },\r\n        // 查询详情订单\r\n        async getOrderDetail() {\r\n\r\n\t\t\t\t try {\r\n                let res = await this.$http.getOrderDetail({orderId:this.orderId})\r\n                this.orderDetail = res.dataInfo?res.dataInfo:null\r\n                if(this.orderDetail?.orderGoodsList.length){\r\n                    this.orderType = this.orderDetail?.orderGoodsList[0].orderType\r\n                }\r\n                let length=0\r\n                this.orderDetail?.orderGoodsList?.forEach(item=>{\r\n                    if(item.orderType == 'SECKILL_ORDER'){\r\n                        length++\r\n                    }\r\n                })\r\n                console.log(length);\r\n                if(this.orderDetail?.orderGoodsList?.length==length){\r\n                    this.countTime = new Date(this.orderDetail.orderGoodsList[0].createDate.replace(/-/g,'/')).getTime()/1000+this.orderDetail.secondsKillOrder*1\r\n                    console.log('this.countTime: ', this.countTime);\r\n                }else{\r\n                    this.countTime = new Date(this.orderDetail.orderGoodsList[0].createDate.replace(/-/g,'/')).getTime()/1000+this.orderDetail.goodsOrderEndTime*1\r\n                }\r\n\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n\r\n        },\r\n        payBtn(){\r\n            if (!this.groupData?.type || this.cardData?.id) {\r\n                this.goPay(this.orderId)\r\n            }\r\n        },\r\n        // 普通订单去支付\r\n        async goPay() {\r\n            try {\r\n                let orderPayType = (getApp().globalData.freshShopId?.includes(this.$globleData.shopId))?4:7\r\n                const {dataInfo: res} = await this.$http.payWxOrder({\r\n                    orderId: this.orderId,\r\n                    orderPayType\r\n                })\r\n                this.payDispose(res, this.orderId)\r\n                return res\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        },\r\n        // 支付回调\r\n        payDispose(res, orderId) {\r\n            const paySign = res?.paySign || ''\r\n            // 如果获取失败 就直接跳转到订单待支付页面\r\n            if (!paySign) {\r\n                // 跳转待支付页面\r\n                this.goTo('/pagesB/myCollage/index', false, true)\r\n                return\r\n            }\r\n            // 成功 调起微信支付\r\n            wx.requestPayment({\r\n                timeStamp: res.timeStamp,\r\n                nonceStr: res.nonceStr,\r\n                package: res.packageValue,\r\n                signType: res.signType,\r\n                paySign: res.paySign,\r\n                success: () => {\r\n                    this.$eventPlugInCode({\r\n                        ...this.codeParam,\r\n                        title: '商品详情',\r\n                        goodsName:this.orderDetail?.orderGoodsList[0]?.goodsName,\r\n                        goodsId:this.orderDetail?.orderGoodsList[0]?.goodsId,\r\n                        orderId: orderId || '',\r\n                        type: this.isCart?'4':'6',\r\n                        extendField: this.orderDetail?.orderActualPrice || 0\r\n                    })\r\n                    this.isPayment = true\r\n                    this.getPayment()\r\n                },\r\n                fail: () => {\r\n                    if (this.groupData?.type) {\r\n                        this.goTo('/pagesB/myCollage/index', false, true)\r\n                    } else {\r\n                        this.goTo('/pagesA/mine/myOrder', false, true)\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        //状态查询\r\n        getPayment() {\r\n            let state = 'ORDER_UNPAID', index = 0\r\n            let groupType = this.orderDetail?.groupActivityType || null\r\n            let type = groupType ? 1 : 2  //1 拼团 2 普通\r\n            this.timeOutPayWait(state,index,type)\r\n        },\r\n        timeOutPayWait(state, index, type){\r\n            this.timer = setTimeout(async () => {\r\n                if (type == 2) {\r\n                    try{\r\n                        const {dataInfo: res={}} = await this.$http.getOrderDetail({orderId: this.orderId})\r\n                        state = res?.orderStatus || 'ORDER_UNPAID'\r\n                    } catch (res){\r\n                        if (type == 1) {\r\n                            this.goTo('/pagesB/myCollage/index', false, true)\r\n                        } else {\r\n                            this.goTo('/pagesA/mine/myOrder', false, true)\r\n                        }\r\n                        return\r\n                    }\r\n                }\r\n                index = index+1\r\n                if (state != 'ORDER_UNPAID') {\r\n                    this.goTo(`/pagesA/shop/paySuccess?type=${type}&orderId=${this.orderId}&oderTypeId=${this.orderId}`, false, true)\r\n                    return\r\n                }\r\n                if(index>=10){\r\n                    if (type == 1) {\r\n                        this.goTo('/pagesB/myCollage/index',\r\n                            false, true)\r\n                    } else {\r\n                        this.goTo('/pagesA/mine/myOrder', false, true)\r\n                    }\r\n                    return\r\n                }\r\n                this.timeOutPayWait(state,index,type)\r\n            }, this.payWaitTime)\r\n        }\r\n    },\r\n};\r\n</script>\r\n<style>\r\n    page{\r\n        background: #F8F8F8;\r\n    }\r\n</style>\r\n<style scoped lang=\"scss\">\r\n    .head-price{\r\n        text-align: center;\r\n        color: $themeColor;\r\n        margin-top: 25rpx;\r\n         font-weight: bold;\r\n        .price-symbol{\r\n            font-size: 40rpx;\r\n        }\r\n        .price{\r\n            font-size: 72rpx;\r\n        }\r\n    }\r\n    .favorable-price{\r\n        font-size: 28rpx;\r\n        color: $themeColor;\r\n        text-align: center;\r\n    }\r\n    .time-count{\r\n\r\n        // height: 60rpx;\r\n        margin: 16rpx auto 50rpx;\r\n        font-size: 28rpx;\r\n        color: #666666;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        .remaining-time{\r\n          display: block;\r\n          min-width: 311rpx;\r\n          background: #F1F1F1;\r\n          padding: 10rpx 20rpx;\r\n          border-radius: 45rpx;\r\n        }\r\n    }\r\n    .address{\r\n        width: 690rpx;\r\n        min-height: 196rpx;\r\n        background: #ffffff;\r\n        margin: 50rpx auto 0;\r\n        border-radius: 16rpx;\r\n        .content{\r\n          height: 100rpx;\r\n          margin-bottom: 20rpx;\r\n          .user-image{\r\n          width: 68rpx;\r\n          height: 68rpx;\r\n          margin-left: 30rpx;\r\n        }\r\n        .user-info{\r\n           margin-left: 10rpx;\r\n          .delivery-person{\r\n            font-size: 32rpx;\r\n            color: #191919;\r\n            font-weight: 500;\r\n          }\r\n          .user-name{\r\n            font-size: 28rpx;\r\n            color: #666666;\r\n            margin-left: 20rpx;\r\n          }\r\n        }\r\n        }\r\n\r\n        .address-image {\r\n        margin-left: 30rpx;\r\n        width: 68rpx;\r\n        height: 68rpx;\r\n        }\r\n    .card-left{\r\n        flex: 1;\r\n        margin-left: 10rpx;\r\n        padding-right: 69rpx;\r\n    .left-top{\r\n        .left-user-name{\r\n            font-size: 32rpx;\r\n            color: #191919;\r\n            font-weight: 500;\r\n        }\r\n        .left-user-phone{\r\n            margin-left: 20rpx;\r\n            font-size: 28rpx;\r\n            color: #666666;\r\n            font-weight: 400;\r\n        }\r\n    }\r\n    .left-bottom{\r\n        margin-top: 16rpx;\r\n        font-size: 30rpx;\r\n        color: #999999;\r\n        letter-spacing: 0;\r\n        line-height: 42rpx;\r\n        font-weight: 400;\r\n    }\r\n    }\r\n    .shoname{\r\n        font-size: 32rpx;\r\n        color: #191919;\r\n        font-weight: 500;\r\n    }\r\n  }\r\n    .store-card{\r\n      border-radius: 16rpx;\r\n        width: 690rpx;\r\n        background: #ffffff;\r\n        margin: 20rpx auto;\r\n        .title{\r\n            width: 100%;\r\n            //height: 80rpx;\r\n            background: #FFFFFF;\r\n            border-radius: 20rpx 20rpx 0px 0px;\r\n            padding: 30rpx 30rpx 0rpx;\r\n            font-size: 15px;\r\n            color: #191919;\r\n            text-align: center;\r\n            font-weight: 500;\r\n        }\r\n    }\r\n\r\n    .order-info {\r\n      width: 690rpx;\r\n      margin: 0 auto;\r\n    }\r\n    .seat{\r\n      height: iphone-bottom(140rpx);\r\n    }\r\n    .pay-btn{\r\n        position: fixed;;\r\n        bottom:0;\r\n        padding:18rpx 0 iphone-bottom(18rpx) 0 ;\r\n        width: 100%;\r\n        background: #ffffff;\r\n        .btn{\r\n            width: 600rpx;\r\n            height: 40px;\r\n            margin: 0 auto;\r\n            background: #D1B085;\r\n            border-radius: 45rpx;\r\n            font-size: 28rpx;\r\n            color: #FFFFFF;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            font-weight: bold;\r\n        }\r\n    }\r\n    /deep/.g-order-info{\r\n      border-radius: 16rpx;\r\n    }\r\n\r\n    .pay-wait{\r\n      margin-top: 20rpx;\r\n      padding-bottom: 20rpx;\r\n      background: #ffffff;\r\n      flex-direction: column;\r\n      image{\r\n        width:300rpx;\r\n        height: 300rpx;\r\n      }\r\n      .title{\r\n        transform: translatey(-30rpx);\r\n        font-family: PingFangSC-Semibold;\r\n        font-size: 32rpx;\r\n        color: #191919;\r\n        font-weight: 600;\r\n      }\r\n      .tip{\r\n        margin-top: 10rpx;\r\n        font-family: PingFangSC-Regular;\r\n        font-size: 32rpx;\r\n        color: #666666;\r\n        font-weight: 400;\r\n      }\r\n    }\r\n\r\n</style>\r\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./waitPayment.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./waitPayment.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1707034215970\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./waitPayment.vue?vue&type=style&index=1&id=8e8e78e8&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./waitPayment.vue?vue&type=style&index=1&id=8e8e78e8&scoped=true&lang=scss&\""],"sourceRoot":""}