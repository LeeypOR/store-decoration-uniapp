{"version":3,"sources":["webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/components/orderBtn.vue?f173","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/components/orderBtn.vue?997b","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/components/orderBtn.vue?f421","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/components/orderBtn.vue?0423","uni-app:///components/orderBtn.vue","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/components/orderBtn.vue?45a4"],"names":["props","bntData","type","default","direction","groupType","created","watch","handler","immediate","computed","list","orderType","comOrderStatus","console","item","arr","orderTypes","groupStatusList","detailGroupList","goodsType","data","cancelShow","content","newData","title","confrimText","orderGoodsId","orderId","id","routerPath","isMoreBtn","methods","clearMoreBtn","showMoreBtn","handelItem","JSON","payEnd","groupOrderId","res","addCart","goodsId","goodsSpecIds","goodsAmount","param","confirmOrder","liftType","extendRecieve","cancelConfirm","goGroupPay","goPay","orderPayType","payDispose","wx","timeStamp","nonceStr","package","signType","paySign","success","fail"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiI;AACjI;AAC4D;AACL;AACsC;;;AAG7F;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,+FAAM;AACR,EAAE,wGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oLAEN;AACP,KAAK;AACL;AACA,aAAa,kLAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/CA;AAAA;AAAA;AAAA;AAAuzB,CAAgB,syBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACkD30B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAA;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;IACAE;MACAH;MACAC;IACA;EACA;EACAG;IACA;IACA;IACA;IAEA;EACA;EACAC;IACAN;MACAO;QACA;MACA;MACAC;IACA;EACA;EACAC;IACAC;MAAA;QAAA;QAAA;QAAA;MACA;MACA;MACA;QACA;QACA;UACAC;QACA;UACAA;QACA;QAEAC;UACA;UACA;YACA;YACAC;YACA,IACA,4EACA,oEACAC,6BACA;cACAC;YAEA,WACA,yCACA,gCACAD,6BACA;cACA;cACAC;YACA;cAEA;gBAAA;gBACAA;kBACA;gBACA;cACA;YAEA;UACA;UACA;UAAA,KACA;YACA,IACA,yCACA,iCACAD,+BACA,8BACA;cAAA;cACA;cACA;gBACA;gBACAC;cACA;gBACAA;cACA;YACA;cACA;cACAA;YACA;cACA;gBACAA;cACA;YACA;YACA;UACA;YACA;YACA,IACA,yCACA,gCACAD,+BACA,8BACA;cACA;gBACA;gBACAC;kBACA;oBACA;kBACA;gBACA;cACA;gBACAA;cACA;YACA;cACA;gBACA;kBAAA;kBACAA;oBACA;sBACA;oBACA;kBACA;gBACA;kBAAA;kBACAA;oBACA;sBACA;oBACA;kBACA;gBACA;cACA;YACA;UACA;YACA;YACA;cAAA;cACA;;cAEA;cACA;gBAAA;gBACAC;cACA;gBACAA;cACA;cACA;gBACAD;kBACA;gBACA;cACA;gBACAA;cACA;YACA;UACA;QACA;MACA;MACA;QACA;QACAJ;QACAM;UACA;YACAF;UACA;QACA;MACA;MACA;QACA;QACAJ;QACAO;UACA;YACA;cACA;gBACA;gBACAH;cACA;gBACAA;cACA;YACA;cACAA;YACA;UACA;QACA;MACA;MACA,qSACAI;MACA;QACAJ;UACA;YACA;UACA;QACA;MACA;MACA;IACA;EACA;EACAK;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAhB;MACAiB;MACAC;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;MACA;MACA;QACA;QAEA;UACA;UACA;QACA;QACA;UACA;UACA;QACA;QACA;UACA;UACA;UACA;UACA;QACA;UACA;UACA;UACA;QACA;UACA;UACA;UACA;UACA;UAEA;QACA;UAAA;UACA;UACA;UAEA,0DAEA,6CACAC,eACA,uOACA,EACA;QACA;UAAA;UACA;UACA;UACA,6DAEA,6CACAA,eACA,uOACA,EACA;QACA;UACA;UACA;UACA;QAEA;UACA;UACA;UACA;QACA;UACA;UACA;UACA;QAEA;UACA;UACA;UACA;QACA;UACA;UACA;UAEA;QACA;UACA;UACA;UACA;QACA;UAAA;UACA;UACA,oDAEA,8IACAA,yCACA;QACA;MACA;MACA;MACA;QACA;QA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","file":"components/orderBtn.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./orderBtn.vue?vue&type=template&id=3d2e7d2e&scoped=true&\"\nvar renderjs\nimport script from \"./orderBtn.vue?vue&type=script&lang=js&\"\nexport * from \"./orderBtn.vue?vue&type=script&lang=js&\"\nimport style0 from \"./orderBtn.vue?vue&type=style&index=0&id=3d2e7d2e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d2e7d2e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/orderBtn.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderBtn.vue?vue&type=template&id=3d2e7d2e&scoped=true&\"","var components\ntry {\n  components = {\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-modal/u-modal\" */ \"uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n    uMask: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-mask/u-mask\" */ \"uview-ui/components/u-mask/u-mask.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.direction != \"column\" && _vm.list.length > 2\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderBtn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderBtn.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"store-btn\" :class=\"direction == 'column' ? 'store-btn-column' : ''\">\r\n    <view class=\"more-btn\" v-if=\"direction != 'column' && list.length > 2\">\r\n      <view class=\"more-name\" @click=\"showMoreBtn\">更多</view>\r\n      <view class=\"more-popUp\" v-if=\"isMoreBtn\">\r\n        <view\r\n          class=\"item-btn\"\r\n          v-for=\"(item, index) in list\"\r\n          v-if=\"index > 1\"\r\n          hover-class=\"viewHoveClass\"\r\n          @click=\"handelItem(item)\"\r\n        >\r\n          {{ item.name }}\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view :class=\"direction != 'column' ? 'btn-list-box u-flex u-flex-1' : 'btn-change'\">\r\n      <view\r\n        @click=\"handelItem(item)\"\r\n        v-for=\"(item, index) in list\"\r\n        :key=\"index\"\r\n        class=\"btn\"\r\n        v-if=\"direction == 'column' || index < 2\"\r\n        :class=\"direction == 'column' ? 'btn-column' : ''\"\r\n      >\r\n        {{ item.name }}\r\n      </view>\r\n    </view>\r\n\r\n    <u-modal\r\n      v-model=\"cancelShow\"\r\n      :content=\"content\"\r\n      :title=\"title\"\r\n      show-cancel-button\r\n      border-radius=\"20\"\r\n      :confirm-text=\"confrimText\"\r\n      @confirm=\"cancelConfirm\"\r\n      confirm-color=\"#FFFFFF\"\r\n      cancel-color=\"#D1B085\"\r\n    >\r\n    </u-modal>\r\n    <u-mask\r\n      :show=\"isMoreBtn\"\r\n      @click=\"clearMoreBtn\"\r\n      :custom-style=\"{ background: 'rgba(0,0,0,0)' }\"\r\n    ></u-mask>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { comOrderStatus, groupStatusList, detailGroupList } from '@/common/data.js'\r\n\r\nexport default {\r\n  props: {\r\n    bntData: {\r\n      type: Object,\r\n      default: null,\r\n    },\r\n    direction: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    groupType: {\r\n      type: String,\r\n      default: 'common', //订单的类型common 普通，group 拼团\r\n    },\r\n  },\r\n  created() {\r\n    let pages = getCurrentPages()\r\n    let page = pages[pages.length - 1]\r\n    let currentPage = page.route\r\n\r\n    this.routerPath = currentPage\r\n  },\r\n  watch: {\r\n    bntData: {\r\n      handler(newVal, oldVal) {\r\n        this.newData = newVal\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n  computed: {\r\n    list() {\r\n      let arr = []\r\n      let orderType = ''\r\n      if (this.groupType == 'common') {\r\n        //如果是普通的订单\r\n        if (this.newData.orderStatus) {\r\n          orderType = this.newData.orderStatus\r\n        } else {\r\n          orderType = this.newData.orderGoodsList[0].orderStatus\r\n        }\r\n\r\n        comOrderStatus.forEach((item) => {\r\n          //returnGoodsAuditStatus 1 已售后 0 没有售后\r\n          if (orderType == 'ORDER_UN_ISSUE' || orderType == 'ORDER_LEFT_WAIT') {\r\n            // 如果是申请退款了，就不应该展示退款的按钮 或者是购买的方式是paymentWay: 2(现金+固定积分) 3 (纯积分) 的话就不展示退款按钮\r\n            console.log('getApp().globalData.freshShopId.includes(this.$globleData.shopId): ', getApp().globalData.freshShopId.includes(this.$globleData.shopId));\r\n            if (\r\n              (this.newData.returnGoodsAuditStatus == 1 && item.orderType == orderType) ||\r\n              ((this.newData.paymentWay == 3 || this.newData.paymentWay == 2) &&\r\n                item.orderType == orderType)\r\n            ) { \r\n               arr = []\r\n              \r\n            } else if (\r\n              this.newData.orderActualPrice != '0' &&\r\n              this.newData.orderInvoiceId &&\r\n              item.orderType == orderType\r\n            ) {\r\n              //如果有发表id,并且订单金额不为0 就展示查看发票历史\r\n              arr = item.list\r\n            } else {\r\n              \r\n              if (this.newData.orderActualPrice != '0' && item.orderType == orderType || getApp().globalData.freshShopId.includes(this.$globleData.shopId) && this.newData.orderActualPrice == '0' && item.orderType == orderType) {\r\n                arr = item?.list?.filter((someItem) => {\r\n                  return someItem.type == 'refund'\r\n                })\r\n              }\r\n              \r\n            }\r\n          }\r\n          //待评价类型和已完成的订单需要增加开具发票和发票历史\r\n          else if (orderType == 'ORDER_FINISH' || orderType == 'ORDER_UN_EVALUATE') {\r\n            if (\r\n              this.newData.orderActualPrice != '0' &&\r\n              !this.newData.orderInvoiceId &&\r\n              item.orderType == orderType &&\r\n              this.direction !== 'column'\r\n            ) {\r\n              //订单金额不为0并且没有订单发票的id有 展示开发票的按钮\r\n              if (getApp().globalData.freshShopId?.includes(this.$globleData.shopId)) {\r\n                //生鲜店 不开发票\r\n                arr = item.list\r\n              } else {\r\n                arr = item.payList\r\n              }\r\n            } else if (this.newData.orderInvoiceId && item.orderType == orderType) {\r\n              //有发票订单id的\r\n              arr = item.srotList\r\n            } else {\r\n              if (item.orderType == orderType) {\r\n                arr = item.list\r\n              }\r\n            }\r\n            // 待收货状态\r\n          } else if (orderType == 'ORDER_UN_RECEIVED') {\r\n            // 订单不为0并且有发票id\r\n            if (\r\n              this.newData.orderActualPrice != '0' &&\r\n              this.newData.orderInvoiceId &&\r\n              item.orderType == orderType &&\r\n              this.direction !== 'column'\r\n            ) {\r\n              if (this.newData.returnGoodsAuditStatus == 1) {\r\n                //审核状态0 可以退款 1 已售后\r\n                arr = item.list.filter((someitem) => {\r\n                  if (someitem.type != 'confirm-received') {\r\n                    return true\r\n                  }\r\n                })\r\n              } else {\r\n                arr = item.list\r\n              }\r\n            } else {\r\n              if (item.orderType == orderType) {\r\n                if (this.newData.returnGoodsAuditStatus == 1) {\r\n                  arr = item?.list?.filter((someitem) => {\r\n                    if (!['confirm-received', 'invoice-history'].includes(someitem.type)) {\r\n                      return true\r\n                    }\r\n                  })\r\n                } else {\r\n                  arr = item?.list?.filter((someitem) => {\r\n                    if (someitem.type != 'invoice-history') {\r\n                      return true\r\n                    }\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            // 待支付\r\n            if (item.orderType == orderType) {\r\n              // 待支付的赠品订单要把去取消按钮去掉\r\n              \r\n              let orderTypes\r\n              if (this.newData?.orderGoods?.length) {\r\n                orderTypes = this.newData?.orderGoods[0]?.orderType\r\n              } else {\r\n                orderTypes = this.newData.orderGoodsList[0].orderStatus\r\n              }\r\n              if (orderType == 'ORDER_UNPAID' && orderTypes == 'LOTTERY_GIVING_GOODS_ORDER') {\r\n                arr = item.list.filter((someItem) => {\r\n                  return someItem.type != 'close'\r\n                })\r\n              } else {\r\n                arr = item.list\r\n              }\r\n            }\r\n          }\r\n        })\r\n      }\r\n      if (this.groupType == 'group' && this.direction != 'column') {\r\n        //如果是拼团并且是横向的按钮组\r\n        orderType = this.newData.groupOrderStatus\r\n        groupStatusList.forEach((item) => {\r\n          if (item.orderType == orderType) {\r\n            arr = item.list\r\n          }\r\n        })\r\n      }\r\n      if (this.groupType == 'group' && this.direction == 'column') {\r\n        //如果是拼团并且是竖向的按钮组\r\n        orderType = this.newData.groupOrderStatus\r\n        detailGroupList.forEach((item) => {\r\n          if (item.orderType == orderType) {\r\n            if (orderType == 'GROUP_SUCCESS') {\r\n              if (this.newData.endPayStatus == 1 || this.newData.groupActivityType == 1) {\r\n                //付过尾款的不要付尾款按钮\r\n                arr = item.filterList\r\n              } else {\r\n                arr = item.list\r\n              }\r\n            } else {\r\n              arr = item.list\r\n            }\r\n          }\r\n        })\r\n      }\r\n      const goodsType = (this.bntData?.orderGoods || this.bntData?.orderGoodsList || [])[0]\r\n        ?.goodsType\r\n      if (goodsType == 3) {\r\n        arr = arr.filter((item) => {\r\n          if (item.type != 'check-logistics') {\r\n            return true\r\n          }\r\n        })\r\n      }\r\n      return arr\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      cancelShow: false,\r\n      content: '',\r\n      newData: null,\r\n      title: '',\r\n      confrimText: '',\r\n      orderGoodsId: '',\r\n      orderId: '',\r\n      orderType: '',\r\n      id: '',\r\n      routerPath: '',\r\n      isMoreBtn: false, // 显示更多按钮\r\n    }\r\n  },\r\n  methods: {\r\n    // 清除更多按钮\r\n    clearMoreBtn() {\r\n      this.isMoreBtn = false\r\n    },\r\n    // 显示跟多按钮\r\n    showMoreBtn() {\r\n      this.isMoreBtn = !this.isMoreBtn\r\n    },\r\n    handelItem(item) {\r\n      if (this.isMoreBtn) {\r\n        this.clearMoreBtn()\r\n      }\r\n      this.orderType = item.type\r\n      // 普通订单\r\n      if (this.groupType == 'common') {\r\n        this.orderId = this.newData.orderId || this.newData.id\r\n\r\n        if (this.newData.orderGoods) {\r\n          this.orderGoodsId = this.newData.orderGoods[0].goodsId\r\n          this.id = this.newData.orderGoods[0].id\r\n        }\r\n        if (this.newData.orderGoodsList) {\r\n          this.orderGoodsId = this.newData.orderGoodsList[0].goodsId\r\n          this.id = this.newData.orderGoodsList[0].id\r\n        }\r\n        if (item.type == 'close') {\r\n          this.content = '确认取消订单？'\r\n          this.title = '取消订单'\r\n          this.confrimText = '确定'\r\n          this.cancelShow = true\r\n        } else if (item.type == 'pay') {\r\n          this.cancelShow = false\r\n          // this.noMultipleClicks(this.goPay)\r\n          this.goTo('/pagesA/order/waitPayment?orderId=' + this.orderId)\r\n        } else if (item.type == 'delete') {\r\n          //\r\n          this.content = '删除后订单不可恢复，无法处理您的售后问题，请慎重考虑'\r\n          this.title = '确认是否进行删除？'\r\n          this.confrimText = '删除'\r\n\r\n          this.cancelShow = true\r\n        } else if (item.type == 'refund') {\r\n          //退款\r\n          this.cancelShow = false\r\n\r\n          this.goTo(\r\n            `/pagesA/afterSales/refund?orderStatus=${\r\n              this.newData.orderStatus\r\n            }&detail=${JSON.stringify(\r\n              this.newData?.orderGoods || this.newData?.orderGoodsList || []\r\n            )}`\r\n          )\r\n        } else if (item.type == 'evaluate') {\r\n          //评价\r\n          this.cancelShow = false\r\n          this.goTo(\r\n            `/pagesA/order/publishComment?orderStatus=${\r\n              this.newData.orderStatus\r\n            }&detail=${JSON.stringify(\r\n              this.newData?.orderGoods || this.newData?.orderGoodsList || []\r\n            )}`\r\n          )\r\n        } else if (item.type == 'confirm-received') {\r\n          //确认收货\r\n          this.cancelShow = false\r\n          this.$u.throttle(this.confirmOrder, 3000)\r\n          \r\n        } else if (item.type == 'but-again') {\r\n          //再次购买\r\n          this.cancelShow = false\r\n          this.goTo(`/pagesA/shop/goodsDetail?id=${this.orderGoodsId}`)\r\n        } else if (item.type == 'extend-received') {\r\n          //延长收货\r\n          this.cancelShow = false\r\n          this.$u.throttle(this.extendRecieve, 3000)\r\n          \r\n        } else if (item.type == 'check-logistics') {\r\n          //延长收货\r\n          this.cancelShow = false\r\n          this.goTo(`/pagesA/shop/logistic?orderId=${this.id}`)\r\n        } else if (item.type == 'add-cart') {\r\n          //添加购物城\r\n          this.cancelShow = false\r\n          \r\n          this.$u.throttle(this.addCart, 3000)\r\n        } else if (item.type == 'to-invoice') {\r\n          //开具发票\r\n          // this.goTo(`/pagesD/invoice/addRise?type=3&orderId=${this.orderId}&orderGoodsId=${this.id}`)\r\n          this.goTo(`/pagesD/invoice/invoiceOrder`)\r\n        } else if (item.type == 'invoice-history') {\r\n          //开具发票历史\r\n          this.goTo(\r\n            `/pagesD/invoice/details?orderId=${\r\n              this.newData?.orderInvoiceId || ''\r\n            }&goodsList=${JSON.stringify(this.newData.orderGoods)}`\r\n          )\r\n        }\r\n      }\r\n      // 拼团订单\r\n      if (this.groupType == 'group') {\r\n        this.orderId = this.newData.groupOrderId\r\n        if (item.type == 'detaile') {\r\n          //查看详情\r\n          this.goTo(`/pagesA/order/groupDetail?groupOrderId=${this.orderId}`)\r\n        } else if (item.type == 'close') {\r\n          //取消订单\r\n          this.content = '确认取消订单？'\r\n          this.title = '取消订单'\r\n          this.confrimText = '确定'\r\n          this.cancelShow = true\r\n        } else if (item.type == 'delete') {\r\n          this.content = '删除后订单不可恢复，无法处理您的售后问题，请慎重考虑'\r\n          this.title = '确认是否进行删除？'\r\n          this.confrimText = '删除'\r\n          this.cancelShow = true\r\n        } else if (item.type == 'pay') {\r\n          this.cancelShow = false\r\n          this.$u.debounce(this.goGroupPay, 2000)\r\n        } else if (item.type == 'collage-again') {\r\n          this.cancelShow = false\r\n          //\r\n          this.goTo(\r\n            `/pagesA/shop/goodsDetail?id=${this.newData.goodsId}&activeId=${this.newData.groupActivityId}`\r\n          )\r\n        } else if (item.type == 'pay-endPay') {\r\n          //付尾款\r\n          this.cancelShow = false\r\n\r\n          this.payEnd(this.newData.goodsOrderId)\r\n        }\r\n      }\r\n    },\r\n    // 付尾款\r\n    payEnd(id) {\r\n      this.noMultipleClicks(async () => {\r\n        const { dataInfo: res } = await this.$http.payGroupEnd({ groupOrderId: id })\r\n        this.payDispose(res)\r\n      })\r\n    },\r\n\r\n    // 添加购物车\r\n    async addCart() {\r\n      let goodsId, goodsSpecIds, goodsAmount\r\n      if (this.newData.orderGoods) {\r\n        goodsId = this.newData.orderGoods[0].goodsId\r\n        goodsSpecIds = this.newData.orderGoods[0].goodsClassificationId\r\n        goodsAmount = this.newData.orderGoods[0].goodsNum\r\n      } else {\r\n        goodsId = this.newData.orderGoodsList[0].goodsId\r\n        goodsSpecIds = this.newData.orderGoodsList[0].goodsClassificationId\r\n        goodsAmount = this.newData.orderGoodsList[0].goodsNum\r\n      }\r\n      const param = {\r\n        goodsId,\r\n        goodsSpecIds,\r\n        goodsAmount,\r\n      }\r\n      try {\r\n        let res = await this.$http.cartAdd(param)\r\n        if (res.returnCode == 1000) {\r\n          this.$toast('添加购物车成功')\r\n          this.goTo('/pages/shop/shopCart', true)\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    // 确认收货\r\n    async confirmOrder() {\r\n      try {\r\n        let res = await this.$http.confirmOrder({\r\n          orderGoodsId: this.id,\r\n          liftType: 2,\r\n        })\r\n        if (res.returnCode == 1000) {\r\n          this.$toast('确认收货成功')\r\n          this.$parent.fetchOrderList()\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    // 延长收货\r\n    async extendRecieve() {\r\n      try {\r\n        let res = await this.$http.extendReceive({\r\n          orderGoodsId: this.id,\r\n        })\r\n        if (res.returnCode == 1000) {\r\n          this.$toast('延长收货成功')\r\n          this.$parent.fetchOrderList()\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    // 取消模态框确认按钮\r\n    async cancelConfirm() {\r\n      if (this.orderType == 'close') {\r\n        if (this.groupType == 'common') {\r\n          //普通订单取消\r\n          try {\r\n            let res = await this.$http.cancelOrder({\r\n              orderId: this.orderId,\r\n            })\r\n            if (res.returnCode == 1000) {\r\n              this.$toast('订单取消成功')\r\n              this.$parent.page = 1\r\n              this.$parent.fetchOrderList()\r\n            }\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n        }\r\n\r\n        if (this.groupType == 'group') {\r\n          //拼团订单取消\r\n          try {\r\n            let res = await this.$http.groupCancelOrder({\r\n              groupOrderId: this.orderId,\r\n            })\r\n            if (res.returnCode == 1000) {\r\n              this.$toast('拼团订单取消成功')\r\n              if (this.routerPath == 'pagesB/myCollage/index') {\r\n                this.$parent.page = 1\r\n                this.$parent.fetchOrderList()\r\n              } else {\r\n                this.goBackPage()\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.log(error);\r\n            \r\n          }\r\n        }\r\n      } else if (this.orderType == 'delete') {\r\n        if (this.groupType == 'common') {\r\n          //普通订单删除\r\n          try {\r\n            let res = await this.$http.deleteOrder({\r\n              orderId: this.orderId,\r\n              orderGoodsId: this.orderGoodsId,\r\n            })\r\n            if (res.returnCode == 1000) {\r\n              this.$toast('订单删除成功')\r\n              if (this.routerPath == 'pagesA/mine/myOrder') {\r\n                this.$parent.page = 1\r\n                this.$parent.fetchOrderList()\r\n              } else {\r\n                this.goBackPage()\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n        }\r\n        if (this.groupType == 'group') {\r\n          //拼团订单删除\r\n\r\n          try {\r\n            let res = await this.$http.groupDeleteOrder({\r\n              groupOrderId: this.orderId,\r\n            })\r\n            if (res.returnCode == 1000) {\r\n              this.$toast('订单删除成功')\r\n              if (this.routerPath == 'pagesB/myCollage/index') {\r\n                this.$parent.page = 1\r\n                this.$parent.fetchOrderList()\r\n              } else {\r\n                this.goBackPage()\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // 拼团订单支付\r\n    async goGroupPay() {\r\n      try {\r\n        const { dataInfo: res } = await this.$http.payGroup({ groupOrderId: this.orderId })\r\n        this.payDispose(res)\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    // 普通订单去支付\r\n    async goPay() {\r\n      try {\r\n        let groupType = this.newData?.groupActivityType || null\r\n\r\n        let type = groupType ? 1 : 2 //1 拼团 2 普通\r\n        let orderPayType = getApp().globalData.freshShopId?.includes(this.$globleData.shopId) ? 4 : 7\r\n        const { dataInfo: res } = await this.$http.payWxOrder({\r\n          orderId: this.orderId,\r\n          orderPayType,\r\n        })\r\n\r\n        // this.$eventPlugInCode({\r\n        //   ...this.codeParam,\r\n        //   title: '商品详情',\r\n        //   orderId: this.orderId,\r\n        //   type: '4',\r\n        // })\r\n        this.payDispose(res)\r\n        return res\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    // 支付回调\r\n    payDispose(res) {\r\n      const paySign = res?.paySign || ''\r\n      // 如果获取失败 就直接跳转到订单待支付页面\r\n      if (!paySign) {\r\n        // 跳转待支付页面\r\n        this.goTo('/pagesB/myCollage/index', false, true)\r\n        return\r\n      }\r\n      let groupType = this.newData?.groupActivityType || null\r\n      let type = groupType ? 1 : 2 //1 拼团 2 普通\r\n      // 成功 调起微信支付\r\n      wx.requestPayment({\r\n        timeStamp: res.timeStamp,\r\n        nonceStr: res.nonceStr,\r\n        package: res.packageValue,\r\n        signType: res.signType,\r\n        paySign: res.paySign,\r\n        success: () => {\r\n          this.goTo('/pagesA/shop/paySuccess?type=' + type)\r\n        },\r\n        fail: () => {\r\n          // this.goTo('/pagesB/myCollage/index', false, true)\r\n        },\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.store-btn {\r\n  margin-top: 20rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n\r\n  .btn {\r\n    min-width: 180rpx;\r\n    padding: 15rpx 30rpx;\r\n    margin-left: 20rpx;\r\n    border: 1rpx solid $themeColor;\r\n    border-radius: 45rpx;\r\n    font-size: 28rpx;\r\n    color: $themeColor;\r\n    font-weight: 400;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    &:last-of-type {\r\n      border: none;\r\n      color: #ffffff;\r\n      background: #d1b085;\r\n      border-radius: 45px;\r\n    }\r\n  }\r\n\r\n  .store-btn-yellow {\r\n  }\r\n}\r\n\r\n.store-btn-column {\r\n  display: flex;\r\n  flex-direction: column-reverse;\r\n\r\n  .btn-column {\r\n    width: 690rpx;\r\n    height: 90rpx;\r\n    margin: 30rpx auto 0;\r\n    border-radius: 45rpx;\r\n    border: 2rpx solid #999999;\r\n    border-radius: 45rpx;\r\n    font-size: 28rpx;\r\n    color: #666666;\r\n    font-weight: 400;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    // &:first-of-type {\r\n    // \tborder: none;\r\n    // \tcolor: #FFFFFF;\r\n    // \tbackground: #E8B759;\r\n    // }\r\n    &:first-of-type {\r\n      margin-bottom: 89rpx;\r\n    }\r\n  }\r\n}\r\n.more-btn {\r\n  position: relative;\r\n  // z-index: 99;\r\n  .more-name {\r\n    font-size: 28rpx;\r\n    font-family: PingFangSC-Regular, PingFang SC;\r\n    font-weight: 400;\r\n    color: #999999;\r\n  }\r\n\r\n  .more-popUp {\r\n    //padding-top:38rpx ;\r\n    z-index: 100779;\r\n    top: 64rpx;\r\n    left: -4rpx;\r\n    position: absolute;\r\n    width: 260rpx;\r\n    background: #ffffff;\r\n    border-radius: 14rpx;\r\n    box-shadow: 0px 4rpx 20rpx 0px rgba(0, 0, 0, 0.1);\r\n    &:before {\r\n      content: '';\r\n      position: absolute;\r\n      top: -20rpx;\r\n      left: 20rpx;\r\n      width: 0;\r\n      height: 0;\r\n      border-left: 14rpx solid transparent;\r\n      border-right: 14rpx solid transparent;\r\n      border-bottom: 20rpx solid rgba(255, 255, 255, 0.9);\r\n      //border-bottom: 20rpx solid red;\r\n    }\r\n    .item-btn {\r\n      padding: 20rpx;\r\n      font-size: 28rpx;\r\n      font-family: PingFangSC-Regular, PingFang SC;\r\n      font-weight: 400;\r\n      color: #191919;\r\n      border-bottom: 2rpx solid #e9e9e9;\r\n    }\r\n  }\r\n}\r\n\r\n.btn-list-box {\r\n  justify-content: flex-end;\r\n}\r\n.btn-change {\r\n  display: flex;\r\n  flex-direction: column-reverse;\r\n}\r\n.viewHoveClass {\r\n  background: #f8f8f8;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderBtn.vue?vue&type=style&index=0&id=3d2e7d2e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderBtn.vue?vue&type=style&index=0&id=3d2e7d2e&lang=scss&scoped=true&\""],"sourceRoot":""}