{"version":3,"sources":["uni-app:///main.js","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pages/shop/shopCart.vue?e674","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pages/shop/shopCart.vue?e65d","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pages/shop/shopCart.vue?0279","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pages/shop/shopCart.vue?3d38","uni-app:///pages/shop/shopCart.vue","webpack:////Users/liyaopeng/参考项目/store-decoration/store-decoration-uniapp/pages/shop/shopCart.vue?bd5c"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","mixins","components","FixedNavigation","GoodsSpecPopup","GuessYouLike","shopcardSkeleton","myTabbar","exchangeAdv","data","title","cardList","isSelectAll","totalMoney","discountPrice","btnState","goodsId","specList","goodsSpecList","goodsNum","specIdList","goodsList","selId","paymentWay","goodsSpecIds","finished","tabbarHeight","goodsSum","shopId","isPopup","refresh","onReady","query","onShow","onHide","computed","tabCurrent","get","set","classifyAbled","val","length","setMaxNum","item","numDisabled","selectLength","console","tabbarInfo","cardIsNoNull","activityName","timestamps","isClose","methods","init","goDetail","orderPrice","goodsOrderList","activityId","skuId","activityType","param","isIntegral","enableCar","buyerType","canteenName","canteenBuyerName","res","checkMore","specSel","ids","money","id","cartId","someItem","selGoodsSpec","goodsSpecValue","getCartList","getGroup","groups","cartDelete","goodsNumChange","index","value","goods","goodsAmount","checkboxGroupChange","detail","checkboxChange","subitem","selectAllChange","sitem","goClose","goCategory","uni","url","goodsSpecInfo","getSpecName","arr","obj","str","checkboxSupplierChange","strArr","someitem"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiI;AACjI;AAC4D;AACL;AACsC;;;AAG7F;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,+FAAM;AACR,EAAE,wGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sLAEN;AACP,KAAK;AACL;AACA,aAAa,sMAEN;AACP,KAAK;AACL;AACA,aAAa,0LAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7GA;AAAA;AAAA;AAAA;AAAs0B,CAAgB,syBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACsI11B;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAKA;EACAC;EACAC;EACAC;IAAAC;IAAAC;IAAAC;IAAAC;IAAAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;IACA;EACA;EACAC;IAAA;IACA;IACAC;MACA;MACA;IACA;EACA;EACAC;IAAA;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACAC;QACA;MACA;MACAC;QACA;MAAA;IAEA;IACA;IACAC;MACA;QACA;QACAC;UACA;YACAC;UACA;QACA;QACA;QACA;UACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;UAEA;UACA;UACA;UACA;YACAC;YACA;UACA;YACAA;UAEA;UACA;QACA;QACA;UACA;YACAA;YACA;UACA;YACAA;UACA;QACA;QAEA;UACA;QACA;QAEA;MACA;IACA;IACA;IACAC;MACA;QACA;UACA;QACA;QACA;UACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACAC;MACA;QACA;UAEA;YACAL;UACA;QACA;QACA;MACA;QACA;MACA;MAEA;IACA;EAAA,GAEA;IACAM;MAAA;IAAA;EACA;IACAC;MAAA;MACA;QACA;MACA;MACA;QACA;MACA;MAEA;IACA;IACAC;MACA;QACA;UACA;QACA;QACA;UACA;QACA;QACA;UACA;QACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QAEA;UAEA;UAGA;QACA;MAEA;IACA;IACA;IACAC;MACA;QACA;QACA;MACA;MACA;MACA;MACA;IACA;EAAA,EACA;EACAC;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,0BACA;kBAAA;kBAAA;gBAAA;gBACAC;gBACA;kBACA;oBACAA,oBACA;sBACAC;sBACAzC;sBACA0C;sBACAvC;sBACAwC;oBACA,EACA;kBACA;gBAEA;gBACAC;kBACAJ;kBACAK;kBACAC;kBACAC;kBAAA;kBACAC;kBACAC;gBACA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBAAA;cAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAAC;gBACA;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAEA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAC;MACA;QACA;MACA;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBACA;gBACAC;gBACAC;gBACAvE;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAAA;gBAAA,OAGA;kBAAAwE;kBAAAhD;gBAAA;cAAA;gBACA;kBAAA;kBACAmB;oBACA;sBAAA;sBACA8B;sBACAA;sBACAA;sBACAA;sBACAA;sBACAA;oBACA;kBACA;kBACA;gBACA;gBACA;kBACA;oBAAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;kBACA;kBACA;gBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBAAA,IACAA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA,IAGA3D;kBAAA;kBAAA;gBAAA;gBAAA,kCACA;cAAA;gBAEA;gBACA;gBACA;gBAAA;gBAAA,OACA;kBAAAuD;gBAAA;cAAA;gBAAAL;gBACA;gBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAU;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA;gBAAAV;gBACA;kBACApB;kBACAH;kBACAA;kBAGA;gBACA;gBACA;gBACA;kBAAA;kBACA;gBAEA;kBACA;kBACA;gBACA;gBAEA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAkC;MACA;MACApE;QACA;QACAqE;QACAA;MACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBACA;kBAAA;kBACA;oBACA;sBACApC;oBACA;kBACA;oBACA;sBACAA;oBACA;kBACA;gBAEA;gBAEA;kBACA;oBACA;kBACA;kBACA;gBACA;gBACAG;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAkC;MAAA;QAAAC;MACAnC;QAAAoC;QAAAD;MAAA;MACA;MACA;QACAtC;UACA;YACAwC;UACA;QACA;MACA;MACA;QACA;UACAxC;QACA;MACA;MACA;MACAG;MACA;QAAA0B;QAAAY;MAAA;MACAD;MACA;IACA;IACA;IACAE;MAAA;MACA;QACA;QAAA,2CACA;UAAA;QAAA;UAAA;YAAA;YAAA;YAAA,4CACAC;cAAA;YAAA;cAAA;gBAAA;gBACA;kBACA7C;gBACA;cACA;YAAA;cAAA;YAAA;cAAA;YAAA;UACA;QAAA;UAAA;QAAA;UAAA;QAAA;QACA;UAAA;UACA;QACA;QACA;UACA;UACA;QACA;QACA;MACA;QACAK;QACA;UACA;UACA;QACA;QACA;MACA;IACA;IACAyC;MAAA;QAAAvF;MACA;QACA;UACA;UACA2C;YAAA;YACA;cACA6C;YACA;YACA;cACA/C;YACA;UAEA;UACAE;QACA;QACA;UACA;YAAA;YACA;UACA;UACA;YACAA;UACA;YACAA;UACA;QACA;MACA;QACA;UACAA;YACA;cACA6C;YACA;UACA;QAEA;MACA;MACA;QACA;UACA7C;QACA;QACA;MACA;IACA;IACA;IACA8C;MAAA;MAAA;MAEA;QAAA;QACA9C;UACA;YACA+C;UACA;YACAA;UACA;QACA;QACA;UACA;QACA;MAEA;MAEA;QACA;UACA/C;QACA;UACAA;QACA;MAEA;IAEA;IACA;IACAgD;MACA;QACA;UACA;QACA;QACA;MACA;MACA;QAEA;QACA;MACA;MACA;MACA7C;MACA;IACA;IACA8C;MACA;QAEA;MACA;QACAC;UACAC;QACA;MACA;IAEA;IACAC;MACA;MACA;QAAA,4CACA;UAAA;QAAA;UAAA;YAAA;YACA;cACA;YACA;UACA;QAAA;UAAA;QAAA;UAAA;QAAA;MACA;MACA;IACA;IACAC;MACA;MAAA,4CACA;QAAA;MAAA;QAAA;UAAA;UACA;UAAA,4CACAC;YAAA;UAAA;YAAA,uDACA;cAAA,IADAC;cACA;gBACAC;cACA;YAAA;UAAA;YAAA;UAAA;YAAA;UAAA;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;IACA;IACA;IACAC;MAAA;MAEA;MACA;MACAC;QACA;QACA;UACA;YACAC;UACA;QACA;MACA;IAGA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACnrBA;AAAA;AAAA;AAAA;AAA6jD,CAAgB,67CAAG,EAAC,C","file":"pages/shop/shopCart.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/shop/shopCart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./shopCart.vue?vue&type=template&id=1937c706&scoped=true&\"\nvar renderjs\nimport script from \"./shopCart.vue?vue&type=script&lang=js&\"\nexport * from \"./shopCart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shopCart.vue?vue&type=style&index=0&id=1937c706&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1937c706\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/shop/shopCart.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopCart.vue?vue&type=template&id=1937c706&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-navbar/u-navbar\" */ \"uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uCheckboxGroup: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-checkbox-group/u-checkbox-group\" */ \"uview-ui/components/u-checkbox-group/u-checkbox-group.vue\"\n      )\n    },\n    uCheckbox: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-checkbox/u-checkbox\" */ \"uview-ui/components/u-checkbox/u-checkbox.vue\"\n      )\n    },\n    uNumberBox: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-number-box/u-number-box\" */ \"uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    },\n    uCountDown: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-count-down/u-count-down\" */ \"uview-ui/components/u-count-down/u-count-down.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.cardList, function (val, key) {\n    var $orig = _vm.__get_orig(val)\n    var g0 = [1, 2].includes(val.activityType) && val.info.length\n    var m0 = g0 ? _vm.activityName(val.activityType) : null\n    var g1 =\n      [\"433733032805924864\", \"461887105476845568\"].includes(_vm.shopId) &&\n      val.info.length &&\n      val.goodsSupplierName\n    var m1 = g1 ? _vm.classifyAbled(val) : null\n    var m6 =\n      val.activityType == 3 || val.activityType == 4\n        ? _vm.activityName(val.activityType)\n        : null\n    var m7 =\n      val.activityType == 3 || val.activityType == 4\n        ? _vm.timestamps(val)\n        : null\n    var l0 = _vm.__map(val.info, function (item, index) {\n      var $orig = _vm.__get_orig(item)\n      var m2 = _vm.numDisabled(item)\n      var m3 = !(item.goodsStock == 0) ? _vm.switchMoney(item.unitPrice) : null\n      var m4 = !(item.goodsStock == 0) ? _vm.numDisabled(item, true) : null\n      var m5 = !(item.goodsStock == 0) ? _vm.setMaxNum(item) : null\n      return {\n        $orig: $orig,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n        m5: m5,\n      }\n    })\n    return {\n      $orig: $orig,\n      g0: g0,\n      m0: m0,\n      g1: g1,\n      m1: m1,\n      m6: m6,\n      m7: m7,\n      l0: l0,\n    }\n  })\n  var g2 = _vm.cardList.length\n  var m8 = g2 > 0 ? _vm.switchMoney(_vm.totalMoney) : null\n  var m9 = g2 > 0 ? _vm.switchMoney(_vm.discountPrice) : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1,\n        g2: g2,\n        m8: m8,\n        m9: m9,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopCart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopCart.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"g-shop-card\">\r\n    <u-navbar :border-bottom=\"false\" title=\"购物车\" title-color=\"#191919\" title-size=\"36\" back-icon-color=\"#ffffff\"></u-navbar>\r\n    <view v-if=\"!finished\">\r\n      <shopcardSkeleton />\r\n    </view>\r\n    <view>\r\n      <block v-show=\"cardIsNoNull\">\r\n        <u-checkbox-group active-color=\"#D1B085\" shape=\"circle\" @change=\"checkboxGroupChange\">\r\n      <view v-for=\"(val,key) in cardList\" :key=\"key\" class=\"shop-box\">\r\n        <!-- 买一赠一和第二件半价头部 -->\r\n        <view v-if=\"[1,2].includes(val.activityType) && val.info.length\" class=\"shop-head u-flex u-row-between\">\r\n          <view class=\"shop-head-left u-flex\">\r\n            <view class=\"activity-name\">\r\n              {{ activityName(val.activityType) }}\r\n            </view>\r\n            <view class=\"activity-text\">活动进行中</view>\r\n          </view>\r\n          <view @click=\"checkMore(val.activityType)\" class=\"shop-head-right u-flex\">\r\n            查看更多\r\n            <text class=\"iconfont icon-arrow\"></text>\r\n          </view>\r\n        </view>\r\n        <!-- 生鲜店铺分类头部 -->\r\n        <view v-if=\"['433733032805924864','461887105476845568'].includes(shopId) && val.info.length && val.goodsSupplierName\" class=\"supplier-head u-flex \">\r\n          <u-checkbox active-color=\"#D1B085\" :disabled=\"classifyAbled(val)\" :value=\"val.supplierAcitve\" :name=\"key\" shape=\"circle\" @change=\"checkboxSupplierChange\" />\r\n          <image class=\"shop-img\" src=\"../../static/image/app_icon_shop.png\" />\r\n          <view class=\"supplier-name\">{{val.goodsSupplierName}}</view>\r\n        </view>\r\n        <block v-for=\"(item,index) in val.info\" :key=\"index\">\r\n          <view class=\"u-flex\">\r\n            <u-checkbox :disabled=\"numDisabled(item)\" :value=\"item.isActive\" :name=\"item.id\" @change=\"checkboxChange\"></u-checkbox>\r\n            <view class=\"g-goods u-flex u-flex-1\">\r\n              <view @click.stop=\"goDetail(item)\" class=\"goods-img-box\">\r\n                <image :src=\"item.goodsImg\"></image>\r\n                <view v-if=\"item.goodsStatus!=2 || item.goodsStock <= 0\">\r\n                     <view class=\"mask-box\"></view>\r\n                    <view class=\"mask-title\">{{item.goodsStatus==1?'仓库中':(item.goodsStatus==3?'已下架':item.goodsStatus==4?'已限购':'已售空')}}</view>\r\n                </view>\r\n              </view>\r\n              <view class=\"goods-detail u-flex\">\r\n                <view class=\"top-box\">\r\n                  <view class=\"u-flex\">\r\n                    <text @click.stop=\"goDetail(item)\" class=\"goods-name u-line-1\">{{ item.goodsName }}</text>\r\n                    <text @click=\"cartDelete(item.id,index,val.activityType,val.goodsSupplierName)\" class=\"iconfont icon-closedicon\"></text>\r\n                  </view>\r\n                  <view class=\"goods-spec u-flex\" v-if=\" item.goodsStock>0\"\r\n                        @click=\" selGoodsSpec(item.goodsId,item.id,item.paymentWay,item.goodsSpecIds,item.goodsSpecValue)\"\r\n                  >\r\n                    <text class=\"goods-spec-title\">商品规格：</text>\r\n                    <text class=\"goods-spec-details u-line-1\">{{ item.goodsSpecValue || '统一规格' }}</text>\r\n                    <image v-if=\"item.goodsSpecValue\" src=\"@/static/image/icon_down.png\"></image>\r\n                  </view>\r\n                </view>\r\n                <view class=\"bottom-box u-flex\" v-if=\"item.goodsStock==0\">\r\n                  <text class=\"reelect-title\">请重新选择商品规格</text>\r\n                  <text @click=\"selGoodsSpec(item.goodsId,item.id,item.paymentWay,item.goodsSpecIds,item.goodsSpecValue)\" class=\"reelect-btn\">重选</text>\r\n                </view>\r\n                <view class=\"bottom-box u-flex\" v-else>\r\n                   <view class=\"u-flex\">\r\n                       <text class=\"goods-money\">¥{{ switchMoney(item.unitPrice) }}</text>\r\n                        <image v-if=\"item.membersPrice\" src=\"/static/image/vip_icon.png\" class=\"vip-icon\"></image>\r\n                   </view>\r\n\r\n                  <u-number-box\r\n                      :long-press=\"false\"\r\n                      bg-color=\"#ECECEC\"\r\n                      :disabled=\"numDisabled(item,true)\"\r\n                      min=\"1\"\r\n                      :value=\"item.goodsAmount\"\r\n                      input-width=\"50\"\r\n                      :index=\"item.id\"\r\n                      @change=\"goodsNumChange\"\r\n                      :max=\"setMaxNum(item)\"\r\n                  >\r\n                  </u-number-box>\r\n                </view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n          <!--活动商品-->\r\n          <view class=\"activity-type-box u-flex\" v-if=\"val.activityType==3 || val.activityType==4\">\r\n            <view class=\"bg-name\">\r\n              <view class=\"type-name u-flex\">{{activityName(val.activityType)}}</view>\r\n            </view>\r\n            <view class=\"type-time u-flex\">还剩\r\n                <u-count-down separator=\"zh\" font-size=\"24\" color=\"#D1B085\" separator-color=\"#D1B085\" separator-size=\"24\" :hide-zero-day=\"false\" :timestamp=\"timestamps(val)\"></u-count-down>后结束</view>\r\n          </view>\r\n        </block>\r\n      </view>\r\n    </u-checkbox-group>\r\n    </block>\r\n    <view class=\"no-data-card\" v-if=\"finished && !cardIsNoNull\">\r\n      <image src=\"https://jdz.g1999.com/ghs/20210917/8b2abf0db9c948f5975b2848391d19fe.png\"></image>\r\n<!--      <text class=\"no-data-tip\">您的购物车是空的</text>-->\r\n      <text class=\"no-data-btn\" @click=\"goCategory\">去逛逛</text>\r\n    </view>\r\n\r\n    <guess-you-like></guess-you-like>\r\n\r\n    <block v-if=\"cardList.length>0\">\r\n      <view style=\"height: 98rpx;margin-top: 24rpx\"></view>\r\n      <view class=\"shop-card-box u-flex\" :style=\"{bottom:tabbarHeight+'px'}\">\r\n        <u-checkbox class=\"u-flex-1\" active-color=\"#D1B085\" v-model=\"isSelectAll\" @change=\"selectAllChange\" shape=\"circle\"> <text class=\"sel-all\">全选</text></u-checkbox>\r\n        <view class=\"m-total-box\">\r\n          <view class=\"total-box u-flex\">\r\n            <text class=\"sel-num\">已选{{selectLength}}件</text>\r\n            <text class=\"num-title\">合计：</text>\r\n            <text class=\"cat-money\">￥{{switchMoney(totalMoney)}}</text>\r\n          </view>\r\n          <view class=\"discounts-money\">已优惠￥{{switchMoney(discountPrice)}}</view>\r\n        </view>\r\n        <text :class=\"{'btn-close-active':isClose}\" class=\"btn-close\" @click=\"goClose\">去结算</text>\r\n      </view>\r\n    </block>\r\n    <goods-spec-popup @addCart=\"specSel\" :buycom=\"paymentWay\" :goodsSpecIds=\"goodsSpecIds\" :goodsId=\"goodsId\" :btnState=\"btnState\" :specList=\"specList\" :goodsSpecList=\"goodsSpecList\"></goods-spec-popup>\r\n    </view>\r\n    <fixed-navigation :fixTime=\"refresh\" :location=\"4\"></fixed-navigation>\r\n    <my-tabbar class=\"mynabbaar\" @change=\"tabbarChange\" v-model=\"tabCurrent\" :bg-color=\"tabbarInfo.backgroundColor\" :list=\"tabbarInfo.navigationList\"></my-tabbar>\r\n    <view v-if=\"isPopup\">\r\n      <view v-for=\"(item,index) in exchangeInfo\">\r\n      <exchangeAdv v-if=\"index==0\" :exchangeInfo=\"exchangeInfo\" :dataInfo=\"item\" :ids=\"index\" @exchangeClose=\"setAdvaerInfo\" />\r\n       <view v-else>\r\n         <exchangeAdv v-if=\"exchageId == index\" :exchangeInfo=\"exchangeInfo\" :dataInfo=\"item\" :ids=\"index\" @exchangeClose=\"setAdvaerInfo\" />\r\n       </view>\r\n    </view>\r\n    </view>\r\n    \r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport GuessYouLike from \"../../components/guessYouLike\";\r\nimport GoodsSpecPopup from \"../../components/goodsSpecPopup\";\r\nimport shareMixin from '../shareMixin.js'\r\nimport shopcardSkeleton from './skeleton'\r\nimport {mapState}  from 'vuex'\r\nimport myTabbar  from '@/components/myTabbar'\r\nimport exchangeMixin  from '@/pages/exchangeMixin'\r\nimport  exchangeAdv  from \"../../components/exchangeAdv\";\r\nimport FixedNavigation from \"../../components/fixedNavigation\";\r\n\r\n\r\nexport default {\r\n    name: \"ShopCart\",\r\n    mixins:[shareMixin,exchangeMixin],\r\n    components: {FixedNavigation, GoodsSpecPopup, GuessYouLike,shopcardSkeleton,myTabbar,exchangeAdv},\r\n    data(){\r\n        return {\r\n            title:'购物车',\r\n            cardList:[],\r\n            isSelectAll:false,     // 是否全选\r\n            totalMoney:0.00,       // 总金额\r\n            discountPrice:'0.00',  //优惠金额\r\n            btnState:4,             // 确定\r\n            goodsId:'',\r\n            specList:[],\r\n            goodsSpecList:[],\r\n            goodsNum:'',\r\n            specIdList: [],\r\n            goodsList: [],\r\n            selId: \"\",\r\n            paymentWay: 0,//后台设置的购买方式\r\n            goodsSpecIds: '',\r\n            finished:false,\r\n            tabbarHeight:0,\r\n            goodsSum:0,\r\n            shopId:'',\r\n            isPopup:true,\r\n            refresh:''\r\n            // tabCurrent:'',\r\n        }\r\n    },\r\n    onReady(){\r\n\t   const query = uni.createSelectorQuery().in(this);\r\n\t\t  query.select('.mynabbaar').boundingClientRect(data => {\r\n            this.tabbarHeight = data.height\r\n\t      // this.top =  data.height //计算高度：元素高度=窗口高度-元素距离顶部的距离（data.top）\r\n\t\t  }).exec()\r\n    },\r\n    onShow() {\r\n        this.shopId = this.$globleData?.shopId\r\n        this.isSelectAll = false\r\n        this.init()\r\n        this.isPopup = true\r\n         this.refresh = new Date().getTime().toString()\r\n    },\r\n    onHide(){\r\n       this.isPopup = false\r\n    },\r\n    computed:{\r\n        tabCurrent:{\r\n            get:function (){\r\n                return this.$store.state.tabIndex\r\n            },\r\n            set:function(value){\r\n                // this.$store.commit('setTabIndex',value)\r\n            }\r\n        },\r\n        // 生鲜店分类勾选框是否禁用\r\n        classifyAbled(){\r\n            return (val)=>{\r\n                let length =0\r\n                val.info.forEach(item=>{\r\n                    if(item.goodsStatus!=2 || item.goodsStock==0){\r\n                        length++\r\n                    }\r\n                })\r\n                // 如果分类下库存为零或者下架的分类的勾选框禁止勾选\r\n                if(length == val.info.length){\r\n                    return true\r\n                }\r\n                return false\r\n            }\r\n        },\r\n        setMaxNum(){\r\n            return (item)=>{\r\n                if(item.enableLimit == 1 && [2,4].includes(item.goodsStatus) ){\r\n\r\n                    let limitCount = item?.limitCount || 0;\r\n                    let num = parseInt(item?.goodsBuyCount) || 0\r\n                    let sum = (limitCount - num)\r\n                    if(sum <=0 ||  item.goodsAmount>sum ){\r\n                        item.goodsStatus = 4\r\n                        return item.goodsAmount\r\n                    }else{\r\n                        item.goodsStatus = 2\r\n\r\n                    }\r\n                    return sum\r\n                }\r\n                if([2,4].includes(item.goodsStatus) ){\r\n                    if(item.goodsAmount>item.goodsStock){\r\n                        item.goodsStatus = 4\r\n                        return item.goodsAmount\r\n                    }else{\r\n                        item.goodsStatus = 2\r\n                    }\r\n                }\r\n\r\n                if(item?.goodsStock == 0 || item?.goodsStock > 0){\r\n                    return item.goodsStock\r\n                }\r\n\r\n                return 1000000\r\n            }\r\n        },\r\n        //   步进器是否禁用\r\n        numDisabled(){\r\n            return(val,isNumBox)=>{\r\n                if([4].includes(val.goodsStatus) && isNumBox){\r\n                    return false\r\n                }\r\n                if(![2].includes(val.goodsStatus)  || val.goodsStock==0){\r\n                    return true\r\n                }\r\n                return false\r\n            }\r\n        },\r\n        selectLength(){\r\n            let length = 0\r\n            console.log('this.goodsList: ', this.goodsList);\r\n            if(this.goodsList.length>0){\r\n                this.goodsList.forEach(item=>{\r\n\r\n                    if(item.isActive){\r\n                        length += item.goodsAmount\r\n                    }\r\n                })\r\n                this.goodsSum = length\r\n            }else{\r\n                this.isSelectAll = false\r\n            }\r\n\r\n            return  length\r\n        },\r\n        // 购物车是否不为null\r\n        ...mapState({\r\n            tabbarInfo:state=>state.tabbarInfo\r\n        }),\r\n        cardIsNoNull(){\r\n            if(this.cardList.length>0 && this.cardList[0].info?.length>0){\r\n                return true\r\n            }\r\n            if(this.cardList.length<=0){\r\n                return false\r\n            }\r\n            \r\n            return false\r\n        },\r\n        activityName() {\r\n            return (val) => {\r\n                if (val == 1) {\r\n                    return '第二件半价'\r\n                }\r\n                if (val == 2) {\r\n                    return '买一赠一'\r\n                }\r\n                if(val == 3){\r\n                    return '秒杀'\r\n                }\r\n                if(val == 4){\r\n                    return '限时折扣'\r\n                }\r\n            }\r\n        },\r\n        timestamps(){\r\n            return (val)=>{\r\n\r\n                if(val.info.length){\r\n\r\n                    let  timestamp =  new Date(val.info[0].endTime.replace(/-/g,'/')).getTime()/1000-new Date().getTime()/1000\r\n\r\n\r\n                    return timestamp\r\n                }\r\n\r\n            }\r\n        },\r\n        // 是否去结算\r\n        isClose() {\r\n            if (this.selectLength > 0) {\r\n                this.$u.debounce(this.orderPrice, 400)\r\n                return true\r\n            }\r\n            this.totalMoney = 0\r\n            this.discountPrice = 0\r\n            return false\r\n        },\r\n    },\r\n    methods:{\r\n        async init(){\r\n            await this.getCartList()\r\n\r\n        },\r\n        // 跳详情\r\n        goDetail(item){\r\n          this.goTo('/pagesA/shop/goodsDetail?id='+item.goodsId)\r\n        },\r\n        async orderPrice() {\r\n            if (this.goodsList?.length) {\r\n                let goodsOrderList = []\r\n                this.goodsList.forEach(item => {\r\n                    if (item.isActive) {\r\n                        goodsOrderList.push(\r\n                            {\r\n                                activityId: item.activityId,\r\n                                goodsId: item.goodsId,\r\n                                skuId: item.goodsSpecIds,\r\n                                goodsNum: item.goodsAmount,\r\n                                activityType: item.activityType ? item.activityType : 0\r\n                            }\r\n                        )\r\n                    }\r\n\r\n                })\r\n                const param = {\r\n                    goodsOrderList: goodsOrderList,\r\n                    isIntegral: 1,\r\n                    enableCar: true,\r\n                     buyerType:getApp().globalData.freshShopId.includes(this.$globleData.shopId)?this.$globleData.buyType:\"\",     //1.食堂 2.个人\r\n                    canteenName:this.$globleData.CanteenName??'',\r\n                    canteenBuyerName:this.$globleData.PurchaserName ?? ''\r\n                }\r\n                if(this.goodsSum<=0){\r\n                    this.totalMoney = 0\r\n                    this.discountPrice = 0\r\n                    return\r\n                }\r\n                let res = await this.$http.carOrderPrice(param)\r\n                // let res = await this.$http.halfOrderPrice(param)\r\n                this.totalMoney = res.dataInfo?.orderActualPrice || '0.00'\r\n                this.discountPrice = res.dataInfo?.priceDiscount || '0.00'\r\n            } else {\r\n                this.totalMoney = 0\r\n                this.discountPrice = 0\r\n            }\r\n        },\r\n\t  //点击查看更多\r\n\t  checkMore(val){\r\n\t\t  if(val == 1){\r\n\t\t\t  this.goTo('/pagesB/halfPrice/index?jumpPageType=SECONDHALF')\r\n\t\t  }\r\n\t\t  if(val == 2){\r\n\t\t\t  this.goTo('/pagesB/halfPrice/index?jumpPageType=SECONDFREE')\r\n\t\t  }\r\n\t },\r\n        //弹窗确定按钮\r\n        async specSel({ids,buyType}) {\r\n            this.specIdList = ids\r\n            const money = this.goodsSpecInfo()?.salePrice || ''\r\n            const id = this.goodsSpecInfo()?.id || ''\r\n            const name = this.getSpecName() || ''\r\n\r\n            if (!money || !name || !id) {\r\n                this.$toast('操作失败')\r\n                return\r\n            }\r\n            await this.$http.cartUpdate({cartId: this.selId, goodsSpecIds: id})\r\n            this.cardList = this.cardList?.map(item => {\r\n                item?.info?.forEach(someItem => {\r\n                    if (someItem.id == this.selId) {\r\n                        someItem.unitPrice = money\r\n                        someItem.goodsSpecValue = name\r\n                        someItem.goodsImg = this.goodsSpecInfo()?.modelPicture || ''\r\n                        someItem.buyType = buyType || 1\r\n                        someItem.goodsStock = this.goodsSpecInfo()?.goodsInventory || ''\r\n                        someItem.goodsSpecIds = id\r\n                    }\r\n                })\r\n                return item\r\n            })\r\n            this.goodsList = this.goodsList?.map(someItem=>{\r\n                if (someItem.id == this.selId) {\r\n                    someItem.unitPrice = money\r\n                    someItem.goodsSpecValue = name\r\n                    someItem.goodsImg = this.goodsSpecInfo()?.modelPicture || ''\r\n                    someItem.buyType = buyType || 1\r\n                    someItem.goodsStock = this.goodsSpecInfo()?.goodsInventory || ''\r\n                    someItem.goodsSpecIds = id\r\n                }\r\n                return someItem\r\n            })\r\n            this.orderPrice()\r\n            this.$store.commit('setSpecification', false)\r\n        },\r\n        // 查询商品规格\r\n        async selGoodsSpec(goodsId,id,paymentWay,goodsSpecIds,goodsSpecValue=\"\"){\r\n            if(!goodsSpecValue){\r\n                return\r\n            }\r\n            if(!goodsId){\r\n                return '商品不存在'\r\n            }\r\n            this.goodsSpecIds = goodsSpecIds\r\n            this.paymentWay = paymentWay || 0\r\n            this.selId = id\r\n            const res = await this.$http.goodsSpecQuery({id:goodsId})\r\n            this.goodsId = goodsId\r\n            this.specList = res?.dataInfo?.goodsSpecList || []\r\n            this.goodsSpecList = res?.dataInfo?.goodsSpecPropertiesList || []\r\n            this.$store.commit('setSpecification', true)\r\n        },\r\n        // 获取购物车列表\r\n        async getCartList() {\r\n            try {\r\n                const {dataInfo: res} = await this.$http.cartList()\r\n                this.goodsList = (res || []).map((item) => {\r\n                    console.log('res: ', res);\r\n                    item.isActive = false\r\n                    item.num = item.goodsAmount\r\n\r\n\r\n                    return item\r\n                })\r\n                // let starArr = []\r\n                if(getApp().globalData.freshShopId?.includes(this.$globleData.shopId)){//生鲜店需要根据供应商做分组\r\n                    this.cardList = this.groupingMethod(this.goodsList,'goodsSupplierName')\r\n\r\n                }else{\r\n                    // 根据活动类型进行分组\r\n                    this.cardList = this.groupingMethod(this.goodsList,'activityType')\r\n                }\r\n\r\n                this.finished = true\r\n            } catch (error) {\r\n                this.finished = true\r\n                this.cardList = []\r\n                this.goodsList = []\r\n            }\r\n        },\r\n        //data是要被分组的数据[]，key是分组依据的关键字\r\n        getGroup(data,key){\r\n            let groups={};\r\n            data.forEach(c=>{\r\n                let value=c[key];\r\n                groups[value]=groups[value]||[];\r\n                groups[value].push(c);\r\n            });\r\n            return groups;\r\n        },\r\n        // 购物删除\r\n        async cartDelete(goodsId, index, activityType,goodsSupplierName) {\r\n            await this.$http.cartDelete([goodsId])\r\n            this.cardList.forEach((item) => {\r\n                if(getApp().globalData.freshShopId?.includes(this.$globleData.shopId)){\r\n                    if (item.goodsSupplierName == goodsSupplierName) {\r\n                        item.info.splice(index, 1)\r\n                    }\r\n                }else{\r\n                    if (item.activityType == activityType) {\r\n                        item.info.splice(index, 1)\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            this.goodsList = this.goodsList?.filter((item)=>{\r\n                if(item.id == goodsId){\r\n                    return false\r\n                }\r\n                return true\r\n            })\r\n            console.log(this.cardList,'76666666666666666');\r\n        },\r\n        // 商品数量发生变化\r\n        goodsNumChange({value,index}){\r\n            console.log({value,index});\r\n            let  goods = {}\r\n            this.cardList.forEach(item=>{\r\n                item.info.forEach(someItem=>{\r\n                    if(someItem.id == index){\r\n                        goods = someItem\r\n                    }\r\n                })\r\n            })\r\n            this.goodsList.forEach(item=>{\r\n                if(item.id == index){\r\n                    item.goodsAmount = value\r\n                }\r\n            })\r\n            if(goods.goodsAmount == value) return\r\n            console.log(value,'0000000000');\r\n            this.$http.cartUpdate({cartId:goods.id,goodsAmount:value})\r\n            goods.goodsAmount = value\r\n            this.isClose  // 触发金额计算\r\n        },\r\n        // 监听整个选项的变化\r\n        checkboxGroupChange(detail=[]){\r\n            if(this.$globleData.shopId.includes(this.$globleData.shopId)){\r\n                let length=0\r\n                for (const item of this.goodsList) {//统计勾选数量\r\n                    for (const someItem of detail) {\r\n                        if(item.id == someItem){\r\n                            length++\r\n                        }\r\n                    }\r\n                }\r\n                let sanpArr = this.goodsList.filter(item=>{//过滤掉下架的和库存为0 的数据\r\n                    return item.goodsStatus==2 && item.goodsStock!=0\r\n                })\r\n                if(length==sanpArr.length){\r\n                    this.isSelectAll = true\r\n                    return\r\n                }\r\n                this.isSelectAll = false\r\n            }else{\r\n                console.log(detail,this.goodsList,'88888888888s');\r\n                if(detail.length == this.goodsList.length){\r\n                    this.isSelectAll = true\r\n                    return\r\n                }\r\n                this.isSelectAll = false\r\n            }\r\n        },\r\n        checkboxChange({value,name}){\r\n            if(getApp().globalData.freshShopId.includes(this.$globleData.shopId)){\r\n                this.cardList.map((item)=>{\r\n                    let length = 0\r\n                    item.info.forEach(subitem=>{//将cardList最外层加一个checkNum字段统计勾选的数量，分类下所有子类勾选上了，总分类就勾选上\r\n                        if(subitem.id == name){\r\n                            subitem.isActive  = value\r\n                        }\r\n                        if(subitem.isActive){\r\n                            length += 1\r\n                        }\r\n\r\n                    })\r\n                    item.checkNum= length\r\n                })\r\n                this.cardList.forEach(item=>{\r\n                    let snapArr = item.info.filter(item=>{//将库存为0 和下架的过滤出来\r\n                        return item.goodsStock!=0 && item.goodsStatus==2\r\n                    })\r\n                    if(item.checkNum == snapArr.length){\r\n                        item.supplierAcitve = true\r\n                    }else{\r\n                        item.supplierAcitve = false\r\n                    }\r\n                })\r\n            }else{\r\n                this.cardList.map((item)=>{\r\n                    item.info.forEach(subitem=>{\r\n                        if(subitem.id == name){\r\n                            subitem.isActive  = value\r\n                        }\r\n                    })\r\n\r\n                })\r\n            }\r\n            this.goodsList = this.goodsList.map(item=>{\r\n                if(item.id == name){\r\n                    item.isActive  = value\r\n                }\r\n                return item\r\n            })\r\n        },\r\n        // 监听 全选是否发生变化\r\n        selectAllChange({value}) {\r\n\r\n            this.cardList.forEach(item=>{\r\n                item.info.forEach(sitem=>{\r\n                    if(sitem.goodsStatus==2 && sitem.goodsStock!=0){\r\n                        sitem.isActive = value\r\n                    }else{\r\n                        sitem.isActive = false\r\n                    }\r\n                })\r\n                if(getApp().globalData.freshShopId?.includes(this.shopId)){\r\n                    this.$set(item,'supplierAcitve',value)\r\n                }\r\n\r\n            })\r\n\r\n            this.goodsList.forEach(item => {\r\n                if(item.goodsStatus==2 && item.goodsStock!=0){\r\n                    item.isActive = value\r\n                }else{\r\n                    item.isActive = false\r\n                }\r\n\r\n            })\r\n\r\n        },\r\n        // 去结算\r\n        goClose(){\r\n            let goodsList = this.goodsList.filter(item => {\r\n                if(item.isActive){\r\n                    return true\r\n                }\r\n                return false\r\n            })\r\n            if(goodsList.length == 0){\r\n\r\n                this.$toast('你还没有选择商品哦')\r\n                return\r\n            }\r\n            let arrList= JSON.parse(JSON.stringify(goodsList))\r\n            console.log('goodsList: ', goodsList);\r\n            this.goTo(`/pagesA/order/orderCenter?goodsList=${JSON.stringify(arrList)}&cart='true'`)\r\n        },\r\n        goCategory(){\r\n            if(getApp().globalData.freshShopId.includes(this.shopId)) {\r\n\r\n                this.goTo('/pages/home/index',true)\r\n            }else{\r\n                uni.switchTab({\r\n                    url: '/pages/category/index'\r\n                });\r\n            }\r\n\r\n        },\r\n        goodsSpecInfo () {\r\n            const str = this.specIdList.join(',')\r\n            if (this.goodsSpecList && this.goodsSpecList.length > 0) {\r\n                for(const item of this.goodsSpecList){\r\n                    if(item.modelIds == str){\r\n                        return item\r\n                    }\r\n                }\r\n            }\r\n            return {}\r\n        },\r\n        getSpecName () {\r\n            let str = []\r\n            for (const item of this.specList) {\r\n                let arr = item.modelList || []\r\n                for (const obj of arr)\r\n                    if (this.specIdList.includes(obj.modelId)) {\r\n                        str.push(obj.modelName)\r\n                    }\r\n            }\r\n            return str.join('-')\r\n        },\r\n        // 生鲜店供应商checkbox事件\r\n        checkboxSupplierChange(e){\r\n\r\n            this.$set(this.cardList[e.name],'supplierAcitve',e.value)\r\n            let strArr = this.cardList[e.name]\r\n            strArr.info.forEach(item=>{\r\n                this.$set(item,'isActive',e.value)\r\n                this.goodsList.forEach(someitem => {\r\n                    if(someitem.id==item.id){\r\n                        someitem.isActive = item.isActive\r\n                    }\r\n                })\r\n            })\r\n\r\n\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/static/css/goods.scss';\r\ng-shop-card{\r\n  padding-bottom: 50rpx;\r\n}\r\n.no-data-card{\r\n  width: 100vw;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  height: 630rpx;\r\n  background: #FFFFFF;\r\n  margin-bottom: 30rpx;\r\n  position: relative;\r\n  image{\r\n    top: 50rpx;\r\n    position: absolute;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    width: 380rpx;\r\n    height: 380rpx;\r\n  }\r\n  .no-data-tip {\r\n    top: 60%;\r\n    position: absolute;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    font-size: 24rpx;\r\n    color: #999999;\r\n    letter-spacing: 0;\r\n    font-weight: 400;\r\n    bottom: 240rpx;\r\n  }\r\n  .no-data-btn {\r\n\r\n    position: absolute;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    display: inline-block;\r\n    background: #d1b085;\r\n    border-radius: 45rpx;\r\n    bottom: 80rpx;\r\n\r\n    padding: 15rpx 84rpx;\r\n    font-size: 28rpx;\r\n    color: #FFFFFF;\r\n    font-weight: 600;\r\n  }\r\n}\r\n.shop-box{\r\n  margin: 20rpx 0;\r\n  background: #ffffff;\r\n  padding-left: 30rpx;\r\n  .supplier-head{\r\n    height: 72rpx;\r\n    .shop-img{\r\n      width: 60rpx;\r\n      height: 51rpx;\r\n      margin:0 10rpx 0 25rpx;\r\n    }\r\n    .supplier-name{\r\n      font-size: 26rpx;\r\n      color: #191919;\r\n    }\r\n  }\r\n\r\n  .shop-head {\r\n    width: 100%;\r\n    height: 60rpx;\r\n    padding: 0 30rpx 0 56rpx;\r\n    .shop-head-left {\r\n      .activity-name {\r\n        padding: 4rpx 12rpx;\r\n        background: #D1B085;\r\n        border-radius: 4rpx;\r\n        font-size: 24rpx;\r\n        color: #FFFFFF;\r\n      }\r\n      .activity-text {\r\n        font-size: 24rpx;\r\n        color: #191919;\r\n        margin-left: 44rpx;\r\n      }\r\n    }\r\n    .shop-head-right {\r\n      font-size: 24rpx;\r\n      color: #999999;\r\n    }\r\n  }\r\n  .shop-title-item{\r\n    padding: 20rpx 0;\r\n    .shop-name{\r\n      margin-left: 6rpx;\r\n      font-size: 24rpx;\r\n      color: #191919;\r\n    }\r\n    .shop-logo{\r\n       width: 28rpx;\r\n       height: 28rpx;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n.shop-card-box{\r\n  z-index: 1000;\r\n  width: 100%;\r\n  padding: 14rpx 30rpx;\r\n  position: fixed;\r\n  // bottom: 0;\r\n  background: #ffffff;\r\n  .sel-all{\r\n    margin-left: 20rpx;\r\n    font-size: 24rpx;\r\n    color: #191919;\r\n  }\r\n  .m-total-box{\r\n    text-align: right;\r\n    margin-right: 20rpx;\r\n    .total-box{\r\n      font-size: 24rpx;\r\n      color: #191919;\r\n      .sel-num{\r\n        font-family: PingFangSC-Regular;\r\n        font-size: 24rpx;\r\n        color: #666666;\r\n        letter-spacing: 0;\r\n        font-weight: 400;\r\n      }\r\n      .num-title{\r\n        font-family: PingFangSC-Regular;\r\n        font-size: 24rpx;\r\n        color: #191919;\r\n        letter-spacing: 0;\r\n        font-weight: 400;\r\n      }\r\n      .cat-money{\r\n        font-family: PingFangSC-Medium;\r\n        font-size: 30rpx;\r\n        color: #191919;\r\n        letter-spacing: 0;\r\n        font-weight: 500;\r\n      }\r\n    }\r\n    .discounts-money{\r\n      margin-top: 4rpx;\r\n      font-family: PingFangSC-Regular;\r\n      font-size: 22rpx;\r\n      color: #D1B085;\r\n      letter-spacing: 0;\r\n      font-weight: 400;\r\n    }\r\n  }\r\n  .btn-close{\r\n    display: inline-block;\r\n    padding: 15rpx 64rpx;\r\n    background: #999999;\r\n    border-radius: 45rpx;\r\n\r\n    font-size: 28rpx;\r\n    font-weight: 600;\r\n    color: #FFFFFF;\r\n    &-active{\r\n      background: $themeColor;\r\n    }\r\n  }\r\n}\r\n/deep/.u-checkbox__label{\r\n  margin-left: 0!important;\r\n  margin-right: 0!important;\r\n}\r\n\r\n// 新增活动样式\r\n.activity-type-box{\r\n  margin-right: 30rpx;\r\n  padding-bottom: 14rpx;\r\n  justify-content: flex-end;\r\n  .bg-name{\r\n    display: inline-block;\r\n    background-image: linear-gradient(270deg,rgba(209,176,133,0.15) 100%,#FFFFFF 14%);\r\n    .type-name{\r\n      width: 120rpx;\r\n      height: 46rpx;\r\n      background: #D1B085;\r\n      border-radius: 23rpx 0rpx 23rpx 23rpx;\r\n      justify-content: center;\r\n      overflow: hidden;\r\n\r\n      font-family: PingFangSC-Regular;\r\n      font-size: 24rpx;\r\n      color: #FFFFFF;\r\n      letter-spacing: 0;\r\n      font-weight: 400;\r\n    }\r\n  }\r\n  .type-time{\r\n    padding: 0 14rpx;\r\n    height: 46rpx;\r\n    background-image: linear-gradient(270deg, #FFFFFF 14%, rgba(209,176,133,0.15) 100%);\r\n    border-radius: 0 23rpx 23rpx 0;\r\n\r\n    font-family: PingFangSC-Regular;\r\n    font-size: 24rpx;\r\n    color: $themeColor;\r\n    letter-spacing: 0;\r\n    font-weight: 400;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopCart.vue?vue&type=style&index=0&id=1937c706&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopCart.vue?vue&type=style&index=0&id=1937c706&lang=scss&scoped=true&\""],"sourceRoot":""}